<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Plus+ â€” Assinaturas</title>
<link rel="icon" href="https://i.postimg.cc/fbm60y7Q/logo.png">

<!-- Google Identity Services -->
<script src="https://accounts.google.com/gsi/client" async defer></script>

<style>
  :root{--bg:#0f0f10;--card:#111;--accent:#ff0055;--muted:#9a9a9a}
  body{
    margin:0;
    font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial;
    background:var(--bg);
    color:#fff;
  }
  .wrap{max-width:980px;margin:28px auto;padding:20px}
  header{display:flex;align-items:center;gap:16px}
  .logo{display:flex;align-items:center;gap:12px}
  .logo img{height:56px;border-radius:8px}
  h1{font-size:20px;margin:0}
  .lead{color:var(--muted);margin-top:6px}
  .main{display:grid;grid-template-columns:360px 1fr;gap:20px;margin-top:20px}
  .card{background:var(--card);padding:18px;border-radius:12px}
  .poster{width:100%;border-radius:8px;display:block}
  .plans{display:flex;flex-direction:column;gap:12px;margin-top:12px}
  .plan{
    padding:12px;
    border-radius:10px;
    background:linear-gradient(180deg,#1a1a1a,#0f0f10);
    border:1px solid rgba(255,255,255,0.03)
  }
  .plan strong{font-size:16px}
  .plan .muted{color:var(--muted)}
  .btn{
    padding:10px 14px;
    border-radius:10px;
    border:none;
    cursor:pointer;
    font-weight:700
  }
  .btn-primary{background:var(--accent);color:#fff}
  .btn-ghost{
    background:transparent;
    border:1px solid rgba(255,255,255,0.06);
    color:#fff
  }
  .muted{color:var(--muted);font-size:13px}
  .disabled{opacity:.35;pointer-events:none}
  #afterPayOverlay{
    display:none;position:fixed;inset:0;
    background:rgba(0,0,0,0.85);
    backdrop-filter:blur(4px);
    z-index:99999;
    justify-content:center;align-items:center
  }
  #afterPayBox{
    width:90%;max-width:520px;background:#111;padding:18px;
    border-radius:12px;text-align:center
  }
  @media(max-width:880px){
    .main{grid-template-columns:1fr}
  }
</style>
</head>
<body>

<div class="wrap">

<header>
  <div class="logo">
    <img src="https://i.postimg.cc/fbm60y7Q/logo.png" alt="Plus+">
    <div>
      <h1>Plus+</h1>
      <div class="lead">Assinaturas mensais e anuais â€” faÃ§a login para assinar</div>
    </div>
  </div>

  <!-- Google Button Render -->
  <div style="margin-left:auto" id="gbutton"></div>
</header>

<main class="main">

  <!-- PÃ”STER -->
  <div class="card">
    <img class="poster" src="https://i.postimg.cc/yN37MSRy/P-ster-das-assinaturas-Plus.jpg">
    <div class="muted" style="margin-top:10px">
      FaÃ§a login com sua Conta Google. ApÃ³s pagar, abra o app da Plus+ e faÃ§a login com a mesma conta Google.
    </div>
  </div>

  <!-- PLANOS -->
  <div>

    <div class="card">
      <h2 style="margin:0 0 8px 0">Escolha o plano</h2>

      <div class="plans">

        <!-- Mensal -->
        <div class="plan">
          <strong>BÃ¡sico â€” R$9,90/mÃªs</strong>
          <div class="muted">Descontos VN Â· 3 canais Â· Conta individual</div>

          <div style="margin-top:10px;display:flex;gap:8px">
            <button id="btnMensal" class="btn btn-primary disabled">Assinar Mensal</button>
            <button class="btn btn-ghost">Detalhes</button>
          </div>
        </div>

        <!-- Anual -->
        <div class="plan">
          <strong>Premium â€” 12x R$10,17 (R$99,90)</strong>
          <div class="muted">AtÃ© 15% de desconto Â· +6 canais Â· FamÃ­lia (2 convidados)</div>

          <div style="margin-top:10px;display:flex;gap:8px">
            <button id="btnAnual" class="btn btn-primary disabled">Assinar Anual</button>
            <button class="btn btn-ghost">Detalhes</button>
          </div>
        </div>

      </div>
    </div>

    <div style="height:12px"></div>

    <!-- STATUS -->
    <div class="card" style="text-align:center">
      <div id="statusArea" class="muted">VocÃª nÃ£o estÃ¡ logado.</div>
      <div style="height:10px"></div>
      <div style="display:flex;gap:8px;justify-content:center">
        <button id="btnLogin" class="btn btn-ghost">Entrar com Google</button>
        <button id="btnLogout" class="btn" style="display:none">Sair</button>
      </div>
    </div>

  </div>

</main>
</div>

<!-- OVERLAY -->
<div id="afterPayOverlay">
  <div id="afterPayBox">
    <h3>Pagamento iniciado</h3>
    <p>Quando concluir o pagamento, abra o app GL Plus+ e faÃ§a login com a mesma conta Google.</p>
    <button id="afterPayClose" class="btn btn-ghost">Fechar</button>
  </div>
</div>

<!-- LOGIN + LIBERAÃ‡ÃƒO PLANOS -->
<script>
/* ==================================
      CONFIGURAÃ‡Ã•ES REAIS
   ================================== */
const CLIENT_ID = "467099082704-bbqe4ble2u63mbpgv0mkdars78pigi6i.apps.googleusercontent.com";
const LINK_MENSAL = "https://mpago.la/2SRyqam";
const LINK_ANUAL  = "https://mpago.la/2SRyqam";

/* ==================================
      ELEMENTOS
   ================================== */
const btnLogin = document.getElementById('btnLogin');
const btnLogout = document.getElementById('btnLogout');
const btnMensal = document.getElementById('btnMensal');
const btnAnual  = document.getElementById('btnAnual');
const statusArea = document.getElementById('statusArea');
const overlay = document.getElementById('afterPayOverlay');
const overlayClose = document.getElementById('afterPayClose');

/* ==================================
      FUNÃ‡Ã•ES DO APP â€” IGUAIS!
   ================================== */
function parseJwt (token) {
  try { return JSON.parse(atob(token.split('.')[1])); }
  catch(e) { return null; }
}

function applyLoginState() {
  const saved = localStorage.getItem('glplus_user');

  if (saved) {
    const user = JSON.parse(saved);
    statusArea.textContent = "Logado como " + user.email;

    btnLogin.style.display = "none";
    btnLogout.style.display = "inline-block";

    btnMensal.classList.remove("disabled");
    btnMensal.disabled = false;

    btnAnual.classList.remove("disabled");
    btnAnual.disabled = false;

  } else {
    statusArea.textContent = "VocÃª nÃ£o estÃ¡ logado.";

    btnLogin.style.display = "inline-block";
    btnLogout.style.display = "none";

    btnMensal.classList.add("disabled");
    btnMensal.disabled = true;

    btnAnual.classList.add("disabled");
    btnAnual.disabled = true;
  }
}

/* ==================================
      CALLBACK DO GOOGLE
   ================================== */
function handleCredentialResponse(res) {
  const payload = parseJwt(res.credential);
  if (!payload) return;

  const user = {
    name: payload.name,
    email: payload.email,
    picture: payload.picture
  };

  // SALVA EXATAMENTE IGUAL AO APP
  localStorage.setItem("glplus_user", JSON.stringify(user));

  applyLoginState();
}

/* ==================================
      INICIALIZAÃ‡ÃƒO GOOGLE
   ================================== */
function initGoogle() {
  google.accounts.id.initialize({
    client_id: CLIENT_ID,
    callback: handleCredentialResponse
  });

  google.accounts.id.renderButton(
    document.getElementById('gbutton'),
    { theme:"outline", size:"large" }
  );
}

/* ==================================
      AÃ‡Ã•ES
   ================================== */
btnLogin.onclick = () => google.accounts.id.prompt();
btnLogout.onclick = () => {
  localStorage.removeItem("glplus_user");
  applyLoginState();
};

btnMensal.onclick = () => {
  window.open(LINK_MENSAL, "_blank");
  overlay.style.display = "flex";
};

btnAnual.onclick = () => {
  window.open(LINK_ANUAL, "_blank");
  overlay.style.display = "flex";
};

overlayClose.onclick = () => overlay.style.display = "none";

/* ==================================
      START
   ================================== */
window.onload = () => {
  applyLoginState();

  let tries = 0;
  const timer = setInterval(() => {
    if (window.google?.accounts?.id) {
      clearInterval(timer);
      initGoogle();
    }
    if (++tries > 20) clearInterval(timer);
  }, 150);
};
</script>

<button id="btnTestePlus" style="margin-top:10px">
  ðŸ§ª Ativar Plus+ (Teste)
</button>

<script>
document.getElementById("btnTestePlus").onclick = () => {
  const user = localStorage.getItem("glplus_user");
  if (!user) {
    alert("FaÃ§a login com Google primeiro");
    return;
  }

  const expiry = Date.now() + (30 * 24 * 60 * 60 * 1000); // 30 dias

  localStorage.setItem("plus_google_subscription", JSON.stringify({
    plan: "MENSAL",
    expiry: expiry
  }));

  alert("âœ… Plus+ ativado por 30 dias (TESTE)");
};
</script>
  
</body>
</html>
